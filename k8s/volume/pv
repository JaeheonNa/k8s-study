# pv, persistentVolume은 NAS나 Local Disk, AWS S3 bucket 등 여러 형태의 Volume을 대상으로 함.
# 여러 형태의 Volume과 pv는 k8s 관리자의 영역임.
# pv가 생성되면, pvc를 생성해 연결하고, Pod 생성 시 Pod와 pvc를 연결함.
# pod와 pvc가 k8s 사용자의 영역임.

##### pv #####
apiVersion: v1
kind: PersistentVolume
metadata:
    name: pv-01
spec:
    capacity:
        storage: 1G
    accessModes:
    - ReadWriteOnce
    local:
        path: /node-v
    nodeAffinity:
        required:
            nodeSelectorTerms:
            - matchExpressions:
              - {key: node, operatoer: In, values: [node01]}

##### pvc #####
apiVersion: v1
kind: PersistentVolumeClaim
metadata:
    name: pvc-01
spec:
    accessModes:
    - ReadWriteOnce
    resources:
        requests:
            storage: 1G
    storageClassName: ""

##### pod #####
apiVersion: v1
kind: Pod
metadata:
    name: pod-1
    labels:
        app: pod
spec:
    containers:
    - name: container-1
      image: najh0528/hello_8000
      ports:
      - containerPort: 8000
      volumeMounts:
      - name: pvc-pv
        mountPath: /volume
    volumes:
    - name: pvc-pv
      persistentVolumeClaim:
        claimName: pvc-01